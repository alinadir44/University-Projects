<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
<body>
    <form enctype="multipart/form-data">
    
        <input id="upload" type=file   accept="text" name="files[]" size=30>
        </form>
        
        <textarea class="form-control" rows=35 cols=120 id="ms_word_filtered_html"></textarea>
        
        <script>
        /*function handleFileSelect(evt) {
            let files = evt.target.files; // FileList object
        
            // use the 1st file from the list
            let f = files[0];
            
            let reader = new FileReader();
        
            // Closure to capture the file information.
            reader.onload = (function(theFile) {
                return function(e) {
                  var data=e.target.result;
                  jQuery( '#ms_word_filtered_html' ).val(data);
                  var d1=new Int8Arr(data);
                  console.log(d1);
                };
              })(f);
        
              // Read in the image file as a data URL.
              reader.readAsText(f);
          }
        
          document.getElementById('upload').addEventListener('change', handleFileSelect, false);*/
          const inputFile = document.querySelector('#upload');

   inputFile.addEventListener('change', () => {
     const fileReader = new FileReader();
     fileReader.onload = e => {
       let array = e.target.result.split('\n'),sum=0;
       array=array.map((element)=>{
        return parseInt(element.replace('\r',''),10);
       })
       jQuery( '#ms_word_filtered_html' ).val(e.target.result);
       array.forEach(element => {
        sum+=element;
       });
       console.log(`Array: ${array}\nSum: ${sum}`);
     };
     fileReader.readAsText(inputFile.files[0], 'UTF-8');
   });
        </script>
</body>
</html>
